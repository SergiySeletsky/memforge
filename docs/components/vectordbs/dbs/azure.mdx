---
title: Azure AI Search
---

[Azure AI Search](https://learn.microsoft.com/azure/search/search-what-is-azure-search/) (formerly "Azure Cognitive Search") provides secure information retrieval at scale for traditional and generative AI search applications.

## Usage

```ts
import { Memory } from "mem0ai/oss";

const memory = new Memory({
  vectorStore: {
    provider: "azure_ai_search",
    config: {
      serviceName: "<your-azure-ai-search-service-name>",
      apiKey: process.env.AZURE_AI_SEARCH_API_KEY,
      collectionName: "mem0",
      embeddingModelDims: 1536,
    },
  },
});

const messages = [
  { role: "user", content: "I'm planning to watch a movie tonight. Any recommendations?" },
  { role: "assistant", content: "How about thriller movies? They can be quite engaging." },
  { role: "user", content: "I'm not a big fan of thriller movies but I love sci-fi movies." },
  { role: "assistant", content: "Got it! I'll avoid thriller recommendations and suggest sci-fi movies in the future." },
];

await memory.add(messages, { userId: "alice", metadata: { category: "movies" } });
```

## Using Binary Compression for Large Vector Collections

```ts
const memory = new Memory({
  vectorStore: {
    provider: "azure_ai_search",
    config: {
      serviceName: "<your-azure-ai-search-service-name>",
      apiKey: process.env.AZURE_AI_SEARCH_API_KEY,
      collectionName: "mem0",
      embeddingModelDims: 1536,
      compressionType: "binary",
      useFloat16: true,
    },
  },
});
```

## Using Hybrid Search

```ts
const memory = new Memory({
  vectorStore: {
    provider: "azure_ai_search",
    config: {
      serviceName: "<your-azure-ai-search-service-name>",
      apiKey: process.env.AZURE_AI_SEARCH_API_KEY,
      collectionName: "mem0",
      embeddingModelDims: 1536,
      hybridSearch: true,
      vectorFilterMode: "postFilter",
    },
  },
});
```

## Using Azure Identity for Authentication

As an alternative to an API key, the Azure Identity credential chain can be used. The precedence order is:

1. **Environment Credential** — service principal via env vars (`AZURE_TENANT_ID`, `AZURE_CLIENT_ID`, `AZURE_CLIENT_SECRET`)
2. **Workload Identity Credential** — Kubernetes / Azure workloads
3. **Managed Identity Credential** — apps hosted in Azure with Managed Identity enabled
4. **Shared Token Cache / Visual Studio Credential** (Windows only)
5. **Azure CLI Credential** — `az login`
6. **Azure PowerShell Credential** — `Connect-AzAccount`
7. **Azure Developer CLI Credential** — `azd auth login`

<Note>If an API key is provided, it takes precedence over Azure Identity.</Note>

To enable RBAC for Azure AI Search, assign the **Search Index Data Contributor** and **Search Service Contributor** roles in the Azure Portal under **Access Control (IAM)**.

When using Azure Identity, omit `apiKey` from the config:

```ts
const memory = new Memory({
  vectorStore: {
    provider: "azure_ai_search",
    config: {
      serviceName: "<your-azure-ai-search-service-name>",
      collectionName: "mem0",
      embeddingModelDims: 1536,
    },
  },
});
```

## Configuration Parameters

| Parameter | Description | Default Value | Options |
| --- | --- | --- | --- |
| `serviceName` | Azure AI Search service name | Required | — |
| `apiKey` | API key for the service | Optional | Falls back to Azure Identity if omitted |
| `collectionName` | Name of the collection/index | `mem0` | Any valid index name |
| `embeddingModelDims` | Dimensions of the embedding model | `1536` | Any integer |
| `compressionType` | Type of vector compression | `none` | `none`, `scalar`, `binary` |
| `useFloat16` | Store vectors in half precision | `false` | `true`, `false` |
| `vectorFilterMode` | Vector filter mode | `preFilter` | `postFilter`, `preFilter` |
| `hybridSearch` | Use hybrid search | `false` | `true`, `false` |

## Notes on Configuration Options

- **`compressionType`**: `none` — full precision; `scalar` — balanced; `binary` — maximum compression
- **`vectorFilterMode`**: `preFilter` — filters before vector search (faster); `postFilter` — filters after (may improve relevance)
- **`useFloat16`**: Reduces storage but may slightly impact accuracy. Useful for very large collections.
- **Filterable Fields**: `userId`, `runId`, and `agentId` are automatically extracted from payloads for filtering.
