---
title: Langchain
---

Build a personalized Travel Agent AI using LangChain.js for conversation flow and Mem0 for memory retention. This integration enables context-aware and efficient travel planning experiences.

## Overview

In this guide, we'll create a Travel Agent AI that:
1. Uses LangChain.js to manage conversation flow
2. Leverages Mem0 to store and retrieve relevant information from past interactions
3. Provides personalized travel recommendations based on user history

## Setup and Configuration

Install necessary libraries:

```bash
npm install @langchain/openai @langchain/core mem0ai dotenv
```

<Note>Remember to get the Mem0 API key from [Mem0 Platform](https://app.mem0.ai).</Note>

```ts
import { ChatOpenAI } from "@langchain/openai";
import { ChatPromptTemplate, MessagesPlaceholder } from "@langchain/core/prompts";
import { HumanMessage, SystemMessage } from "@langchain/core/messages";
import MemoryClient from "mem0ai";

// Initialize LangChain and Mem0
const llm = new ChatOpenAI({ modelName: "gpt-4.1-nano-2025-04-14" });
const mem0 = new MemoryClient({ apiKey: process.env.MEM0_API_KEY });
```

## Create Prompt Template

```ts
const prompt = ChatPromptTemplate.fromMessages([
  new SystemMessage(`You are a helpful travel agent AI. Use the provided context to personalize your responses and remember user preferences and past interactions.
    Provide travel recommendations, itinerary suggestions, and answer questions about destinations.
    If you don't have specific information, you can make general suggestions based on common travel knowledge.`),
  new MessagesPlaceholder("context"),
  new HumanMessage("{input}"),
]);
```

## Define Helper Functions

```ts
async function retrieveContext(query: string, userId: string) {
  try {
    const memories = await mem0.search(query, { userId });
    const memoryList = memories?.results ?? [];
    const serializedMemories = memoryList.map((m: any) => m.memory).join(" ");
    return [
      { role: "system", content: `Relevant information: ${serializedMemories}` },
      { role: "user", content: query },
    ];
  } catch (e) {
    console.error("Error retrieving memories:", e);
    return [{ role: "user", content: query }];
  }
}

async function generateResponse(input: string, context: any[]) {
  const chain = prompt.pipe(llm);
  const response = await chain.invoke({ context, input });
  return response.content as string;
}

async function saveInteraction(userId: string, userInput: string, assistantResponse: string) {
  try {
    const interaction = [
      { role: "user", content: userInput },
      { role: "assistant", content: assistantResponse },
    ];
    const result = await mem0.add(interaction, { userId });
    console.log(`Memory saved: ${result?.results?.length ?? 0} memories added`);
  } catch (e) {
    console.error("Error saving interaction:", e);
  }
}
```

## Create Chat Turn Function

```ts
async function chatTurn(userInput: string, userId: string): Promise<string> {
  const context = await retrieveContext(userInput, userId);
  const response = await generateResponse(userInput, context);
  await saveInteraction(userId, userInput, response);
  return response;
}
```

## Main Interaction Loop

```ts
async function main() {
  console.log("Welcome to your personal Travel Agent Planner!");
  const userId = "alice";

  const inputs = ["I want to visit Japan in the spring", "What should I pack?"];
  for (const input of inputs) {
    console.log(`You: ${input}`);
    const response = await chatTurn(input, userId);
    console.log(`Travel Agent: ${response}`);
  }
}

main();
```

## Key Features

1. **Memory Integration**: Uses Mem0 to store and retrieve relevant information from past interactions.
2. **Personalization**: Provides context-aware responses based on user history and preferences.
3. **Flexible Architecture**: LangChain.js structure allows for easy expansion of the conversation flow.
4. **Continuous Learning**: Each interaction is stored, improving future responses.

## Conclusion

By integrating LangChain.js with Mem0, you can build a personalized Travel Agent AI that maintains context across interactions and provides tailored travel recommendations.

<CardGroup cols={2}>
  <Card title="LangChain Tools" icon="wrench" href="/integrations/langchain-tools">
    Use Mem0 as LangChain tools for agent workflows
  </Card>
  <Card title="Vercel AI SDK" icon="bolt" href="/integrations/vercel-ai-sdk">
    Add memory to Vercel AI SDK applications
  </Card>
</CardGroup>
